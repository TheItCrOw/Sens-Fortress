<UserControl x:Class="SensFortress.View.Main.Views.HomeSubViews.HubView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SensFortress.View.Main.Views.HomeSubViews"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             mc:Ignorable="d" 
             AllowDrop="True"
             d:DesignHeight="900" d:DesignWidth="1100"           
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
            TextElement.Foreground="{DynamicResource MaterialDesignBody}"
            TextElement.FontWeight="Regular"
            TextElement.FontSize="13"
            TextOptions.TextFormattingMode="Ideal"
            TextOptions.TextRenderingMode="Auto"
            Background="{DynamicResource MaterialDesignPaper}"
            FontFamily="{DynamicResource MaterialDesignFont}"
             >
    <!--Background Image-->
    <UserControl>
        <UserControl.Background>
            <ImageBrush ImageSource="pack://application:,,,/Images/Fortress-Bridge.jpg" Stretch="UniformToFill"/>
        </UserControl.Background>

        <Grid>
            <Grid.Background>
                <SolidColorBrush Color="Black" Opacity="0.5"/>
            </Grid.Background>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!--Title-->
            <materialDesign:Card VerticalAlignment="Stretch" materialDesign:ShadowAssist.ShadowDepth="Depth5" Height="57">
                <TextBlock Text="Home-Hub" Style="{StaticResource InformationTextblockStyle}" Foreground="White"/>
            </materialDesign:Card>

            <!--Main Content-->
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!--Quickbar-->
                <StackPanel>
                    <TextBlock Text="Quickbar" Style="{StaticResource InformationTextblockStyle}" Margin="0 20 0 20" HorizontalAlignment="Center"/>
                    <materialDesign:Card Background="Transparent">
                        <DockPanel Margin="10 0 0 0" Height="155">
                            <materialDesign:Card Background="White" x:Name="AddDragItem_Card" DragOver="AddDragItem_Card_DragOver" DragLeave="AddDragItem_Card_DragLeave" Drop="AddDragItem_Card_Drop"
                                             VerticalAlignment="Center" Height="110" Width="130" Margin="0 -22 10 0" Panel.ZIndex="1" materialDesign:ShadowAssist.ShadowDepth="Depth5">
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Style="{StaticResource CategoryTextblockStyle}" Text="Drag" Foreground="Black"/>
                                    <materialDesign:PackIcon Kind="AddBox" Height="50" Width="50" Foreground="Black" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    <TextBlock Style="{StaticResource CategoryTextblockStyle}" Text="Here" Foreground="Black"/>
                                </StackPanel>
                            </materialDesign:Card>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <ListBox x:Name="Quickbar_ListBox" ItemsSource="{Binding QuickBar}">
                                        <ListBox.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel IsItemsHost="True" />
                                            </ItemsPanelTemplate>
                                        </ListBox.ItemsPanel>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <materialDesign:Card Background="GhostWhite" Margin="5" materialDesign:ShadowAssist.ShadowDepth="Depth3">
                                                    <StackPanel Height="110" MinWidth="150">
                                                        <TextBlock Text="{Binding Name}" Style="{StaticResource CategoryTextblockStyle}" Foreground="Black" Margin="5 3 5 0"/>
                                                        <DockPanel Margin="5 40 5 5" LastChildFill="False" HorizontalAlignment="Center">
                                                            <!--copy password button-->
                                                            <Button Style="{StaticResource GoBackButtonStyle}" ToolTip="Copy password" Height="30" Width="30" Command="{Binding CopyPasswordCommand}">
                                                                <materialDesign:PackIcon Kind="Key" Width="22" Height="22"/>
                                                            </Button>
                                                            <!--copy username button-->
                                                            <Button Style="{StaticResource GoBackButtonStyle}" Margin="5 0 5 0" ToolTip="Copy username" Height="30" Width="30" Command="{Binding CopyUsernameCommand}">
                                                                <materialDesign:PackIcon Kind="User" Width="22" Height="22"/>
                                                            </Button>
                                                            <!--open linked page button-->
                                                            <Button Style="{StaticResource GoBackButtonStyle}" ToolTip="Log into website" Height="30" Width="30">
                                                                <materialDesign:PackIcon Kind="Login" Width="22" Height="22"/>
                                                            </Button>
                                                            <!--Delete from quickbar-->
                                                            <Button Style="{StaticResource GoBackButtonStyle}" ToolTip="Delete from quickbar" Margin="5 0 0 0" Height="30" Width="30" Command="{Binding DeleteFromQuickbarCommand}">
                                                                <materialDesign:PackIcon Kind="Delete" Width="22" Height="22"/>
                                                            </Button>
                                                        </DockPanel>
                                                    </StackPanel>
                                                </materialDesign:Card>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </StackPanel>
                            </ScrollViewer>
                        </DockPanel>
                    </materialDesign:Card>
                </StackPanel>
                
                <!--Charts-->
                <Grid Grid.Row="2">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0 0" EndPoint="0 4.7">
                            <LinearGradientBrush.GradientStops>
                                <GradientStop Offset="0.05" Color="Transparent" />
                                <GradientStop Offset="1" Color="Black" />
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="225"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!--Lock/Unlock image and text-->
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <materialDesign:PackIcon Height="200" HorizontalAlignment="Center" Width="200" Foreground="White">
                            <materialDesign:PackIcon.Style>
                                <Style TargetType="materialDesign:PackIcon">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsLocked}" Value="True">
                                            <Setter Property="Kind" Value="ShieldCheck"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsLocked}" Value="False">
                                            <Setter Property="Kind" Value="ShieldOff"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </materialDesign:PackIcon.Style>
                        </materialDesign:PackIcon>
                        <TextBlock>
                              <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource InformationTextblockStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsLocked}" Value="True">
                                            <Setter Property="Text" Value="Fortress is locked."/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsLocked}" Value="False">
                                            <Setter Property="Text" Value="Fortress isn't locked."/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>

                    <!--chart 1-->
                    <materialDesign:Card Grid.Row="1" VerticalAlignment="Stretch" Background="Transparent" Grid.ColumnSpan="3" 
                                         Visibility="{Binding ChartIsLoading, Converter={StaticResource InverseBoolToVisConverter}}">
                        <lvc:CartesianChart Series="{Binding ChartSeries}" LegendLocation="Top" FontSize="15" Margin="7">
                            <lvc:CartesianChart.DataTooltip>
                                <lvc:DefaultTooltip BulletSize="20" Background="Black"/>
                            </lvc:CartesianChart.DataTooltip>
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis Foreground="White" Labels="{Binding ChartLabels}" FontSize="15"/>
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis FontSize="15" Foreground="White" MinValue="{Binding ChartMinValue}" MaxValue="{Binding ChartMaxValue}"></lvc:Axis>
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>
                    </materialDesign:Card>

                    <!--Loading symbol if charts need some time to load-->
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}" Value="50" Height="100" Width="100" Grid.ColumnSpan="3" FontStretch="UltraCondensed" Foreground="White" 
                                 IsIndeterminate="True" Grid.Row="1" Visibility="{Binding ChartIsLoading, Converter={StaticResource BoolToVisConverter}}"/>

                </Grid>

            </Grid>

        </Grid>
    </UserControl>
</UserControl>
